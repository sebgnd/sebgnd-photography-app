{"ast":null,"code":"var _jsxFileName = \"E:\\\\PROJECT\\\\WEB\\\\sebgnd-photography\\\\front-end\\\\src\\\\components\\\\parallax\\\\Parallax.tsx\";\nimport React, { Component } from 'react';\nimport { ParallaxContainer } from './parallax.style';\n\nclass Parallax extends Component {\n  constructor(props) {\n    super(props);\n    this.parallaxElemRef = void 0;\n    this.throttleTime = void 0;\n    this.topOffset = void 0;\n\n    this.updatePosition = () => {\n      if (!this.isElementVisible()) {\n        return;\n      }\n\n      const bottomPageOffset = window.scrollY + window.innerHeight;\n      const offset = bottomPageOffset - this.parallaxElemRef.current.offsetTop;\n      const newTop = this.topOffset - offset * this.props.speed;\n      this.setState({\n        backgroundPositionY: `${newTop}px`\n      });\n    };\n\n    this.topOffset = 0;\n    this.parallaxElemRef = React.createRef();\n    this.throttleTime = 5;\n    this.state = {\n      backgroundPositionY: \"\"\n    };\n  }\n\n  isElementVisible() {\n    if (this.parallaxElemRef && this.parallaxElemRef.current) {\n      const position = this.parallaxElemRef.current.getBoundingClientRect();\n\n      if (position.top < window.innerHeight && position.bottom >= 0) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  getTopOffset() {\n    return this.parallaxElemRef.current.clientHeight * this.props.speed;\n  }\n\n  handleScroll() {\n    this.updatePosition();\n  }\n\n  handleResize() {\n    this.topOffset = this.getTopOffset();\n    this.updatePosition();\n  }\n\n  addEventListener() {\n    window.addEventListener('scroll', this.handleScroll);\n    window.addEventListener('resize', this.handleResize);\n  }\n\n  removeEventListener() {\n    window.removeEventListener('scroll', this.handleScroll);\n    window.removeEventListener('resize', this.handleResize);\n  }\n\n  componentDidMount() {\n    this.topOffset = this.getTopOffset();\n    this.addEventListener();\n  }\n\n  componentWillUnmount() {\n    this.removeEventListener();\n  }\n\n  render() {\n    const {\n      img\n    } = this.props;\n    return React.createElement(ParallaxContainer, {\n      ref: this.parallaxElemRef,\n      style: { ...this.state\n      },\n      backgroundImage: img,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    });\n  }\n\n}\n\nexport default Parallax;","map":{"version":3,"sources":["E:/PROJECT/WEB/sebgnd-photography/front-end/src/components/parallax/Parallax.tsx"],"names":["React","Component","ParallaxContainer","Parallax","constructor","props","parallaxElemRef","throttleTime","topOffset","updatePosition","isElementVisible","bottomPageOffset","window","scrollY","innerHeight","offset","current","offsetTop","newTop","speed","setState","backgroundPositionY","createRef","state","position","getBoundingClientRect","top","bottom","getTopOffset","clientHeight","handleScroll","handleResize","addEventListener","removeEventListener","componentDidMount","componentWillUnmount","render","img"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAyE,OAAzE;AACA,SAASC,iBAAT,QAAkC,kBAAlC;;AAYA,MAAMC,QAAN,SAAuBF,SAAvB,CAA8D;AAK1DG,EAAAA,WAAW,CAACC,KAAD,EAAsB;AAC7B,UAAMA,KAAN;AAD6B,SAJzBC,eAIyB;AAAA,SAHzBC,YAGyB;AAAA,SAFzBC,SAEyB;;AAAA,SAsBjCC,cAtBiC,GAsBhB,MAAM;AACnB,UAAI,CAAC,KAAKC,gBAAL,EAAL,EAA8B;AAC1B;AACH;;AACD,YAAMC,gBAAgB,GAAGC,MAAM,CAACC,OAAP,GAAiBD,MAAM,CAACE,WAAjD;AACA,YAAMC,MAAM,GAAGJ,gBAAgB,GAAG,KAAKL,eAAL,CAAqBU,OAArB,CAA8BC,SAAhE;AACA,YAAMC,MAAM,GAAG,KAAKV,SAAL,GAAiBO,MAAM,GAAG,KAAKV,KAAL,CAAWc,KAApD;AACA,WAAKC,QAAL,CAAc;AAAEC,QAAAA,mBAAmB,EAAG,GAAEH,MAAO;AAAjC,OAAd;AACH,KA9BgC;;AAG7B,SAAKV,SAAL,GAAiB,CAAjB;AACA,SAAKF,eAAL,GAAuBN,KAAK,CAACsB,SAAN,EAAvB;AACA,SAAKf,YAAL,GAAoB,CAApB;AAEA,SAAKgB,KAAL,GAAa;AACTF,MAAAA,mBAAmB,EAAE;AADZ,KAAb;AAGH;;AAEDX,EAAAA,gBAAgB,GAAG;AACf,QAAI,KAAKJ,eAAL,IAAwB,KAAKA,eAAL,CAAqBU,OAAjD,EAA0D;AACtD,YAAMQ,QAAiB,GAAG,KAAKlB,eAAL,CAAqBU,OAArB,CAA6BS,qBAA7B,EAA1B;;AACA,UAAID,QAAQ,CAACE,GAAT,GAAed,MAAM,CAACE,WAAtB,IAAqCU,QAAQ,CAACG,MAAT,IAAmB,CAA5D,EAA+D;AAC3D,eAAO,IAAP;AACH;AACJ;;AACD,WAAO,KAAP;AACH;;AAYDC,EAAAA,YAAY,GAAG;AACX,WAAO,KAAKtB,eAAL,CAAqBU,OAArB,CAA8Ba,YAA9B,GAA6C,KAAKxB,KAAL,CAAWc,KAA/D;AACH;;AAEDW,EAAAA,YAAY,GAAG;AACX,SAAKrB,cAAL;AACH;;AAEDsB,EAAAA,YAAY,GAAG;AACX,SAAKvB,SAAL,GAAiB,KAAKoB,YAAL,EAAjB;AACA,SAAKnB,cAAL;AACH;;AAEDuB,EAAAA,gBAAgB,GAAG;AACfpB,IAAAA,MAAM,CAACoB,gBAAP,CAAwB,QAAxB,EAAkC,KAAKF,YAAvC;AACAlB,IAAAA,MAAM,CAACoB,gBAAP,CAAwB,QAAxB,EAAkC,KAAKD,YAAvC;AACH;;AAEDE,EAAAA,mBAAmB,GAAG;AAClBrB,IAAAA,MAAM,CAACqB,mBAAP,CAA2B,QAA3B,EAAqC,KAAKH,YAA1C;AACAlB,IAAAA,MAAM,CAACqB,mBAAP,CAA2B,QAA3B,EAAqC,KAAKF,YAA1C;AACH;;AAEDG,EAAAA,iBAAiB,GAAG;AAChB,SAAK1B,SAAL,GAAiB,KAAKoB,YAAL,EAAjB;AACA,SAAKI,gBAAL;AACH;;AAEDG,EAAAA,oBAAoB,GAAG;AACnB,SAAKF,mBAAL;AACH;;AAEDG,EAAAA,MAAM,GAAG;AACL,UAAM;AAAEC,MAAAA;AAAF,QAAU,KAAKhC,KAArB;AACA,WACI,oBAAC,iBAAD;AAAmB,MAAA,GAAG,EAAE,KAAKC,eAA7B;AAA8C,MAAA,KAAK,EAAE,EAAC,GAAG,KAAKiB;AAAT,OAArD;AAAsE,MAAA,eAAe,EAAEc,GAAvF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ;AAGH;;AA1EyD;;AA6E9D,eAAelC,QAAf","sourcesContent":["import React, { Component, useEffect, useRef, useState, RefObject } from 'react';\r\nimport { ParallaxContainer } from './parallax.style';\r\nimport { throttle } from 'lodash';\r\n\r\ninterface ParallaxProp {\r\n    img: string;\r\n    speed: number;\r\n}\r\n\r\ninterface ParallaxState {\r\n    backgroundPositionY: string;\r\n}\r\n\r\nclass Parallax extends Component<ParallaxProp, ParallaxState> {\r\n    private parallaxElemRef: RefObject<HTMLDivElement>;\r\n    private throttleTime: number;\r\n    private topOffset: number;\r\n\r\n    constructor(props: ParallaxProp) {\r\n        super(props);\r\n\r\n        this.topOffset = 0;\r\n        this.parallaxElemRef = React.createRef();\r\n        this.throttleTime = 5;\r\n\r\n        this.state = {\r\n            backgroundPositionY: \"\"\r\n        }\r\n    }\r\n\r\n    isElementVisible() {\r\n        if (this.parallaxElemRef && this.parallaxElemRef.current) {\r\n            const position: DOMRect = this.parallaxElemRef.current.getBoundingClientRect();\r\n            if (position.top < window.innerHeight && position.bottom >= 0) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    updatePosition = () => {\r\n        if (!this.isElementVisible()) {\r\n            return;\r\n        }\r\n        const bottomPageOffset = window.scrollY + window.innerHeight;\r\n        const offset = bottomPageOffset - this.parallaxElemRef.current!.offsetTop;\r\n        const newTop = this.topOffset - offset * this.props.speed;\r\n        this.setState({ backgroundPositionY: `${newTop}px` });\r\n    }\r\n\r\n    getTopOffset() {\r\n        return this.parallaxElemRef.current!.clientHeight * this.props.speed;\r\n    }\r\n\r\n    handleScroll() {\r\n        this.updatePosition();\r\n    }\r\n\r\n    handleResize() {\r\n        this.topOffset = this.getTopOffset();\r\n        this.updatePosition();\r\n    }\r\n\r\n    addEventListener() {\r\n        window.addEventListener('scroll', this.handleScroll);\r\n        window.addEventListener('resize', this.handleResize);\r\n    }\r\n\r\n    removeEventListener() {\r\n        window.removeEventListener('scroll', this.handleScroll);\r\n        window.removeEventListener('resize', this.handleResize);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.topOffset = this.getTopOffset();\r\n        this.addEventListener();\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.removeEventListener();\r\n    }\r\n\r\n    render() {\r\n        const { img } = this.props;\r\n        return (\r\n            <ParallaxContainer ref={this.parallaxElemRef} style={{...this.state}} backgroundImage={img} />\r\n        )\r\n    }\r\n}\r\n\r\nexport default Parallax;"]},"metadata":{},"sourceType":"module"}